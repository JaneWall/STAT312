<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Tidy text mining from STAT 413 continued | STAT 312 - Introduction to Data Science Applications</title>
  <meta name="description" content="6 Tidy text mining from STAT 413 continued | STAT 312 - Introduction to Data Science Applications" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Tidy text mining from STAT 413 continued | STAT 312 - Introduction to Data Science Applications" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Tidy text mining from STAT 413 continued | STAT 312 - Introduction to Data Science Applications" />
  
  
  

<meta name="author" content="M. Barouti" />
<meta name="author" content="D. Dietz" />
<meta name="author" content="M. Robinson" />
<meta name="author" content="J. Wall" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tidy-text-mining-from-stat-413.html"/>
<link rel="next" href="music-analysis-intro.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="0.1" data-path="introduction.html"><a href="introduction.html#learning-objectives"><i class="fa fa-check"></i><b>0.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="0.2" data-path="introduction.html"><a href="introduction.html#syllabus-and-grading"><i class="fa fa-check"></i><b>0.2</b> Syllabus and grading</a></li>
<li class="chapter" data-level="0.3" data-path="introduction.html"><a href="introduction.html#how-to-use-the-course-materials"><i class="fa fa-check"></i><b>0.3</b> How to use the course materials</a></li>
</ul></li>
<li class="part"><span><b>I Data Visualization</b></span></li>
<li class="chapter" data-level="1" data-path="visualization-intro.html"><a href="visualization-intro.html"><i class="fa fa-check"></i><b>1</b> Introduction to Data Visualization</a><ul>
<li class="chapter" data-level="1.1" data-path="visualization-intro.html"><a href="visualization-intro.html#install-r-and-rstudio-or-use-rstudio-cloud"><i class="fa fa-check"></i><b>1.1</b> Install R and RStudio (or use RStudio Cloud)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-to-ggplot.html"><a href="intro-to-ggplot.html"><i class="fa fa-check"></i><b>2</b> Intro to ggplot</a><ul>
<li class="chapter" data-level="2.1" data-path="intro-to-ggplot.html"><a href="intro-to-ggplot.html#why-visualize-data"><i class="fa fa-check"></i><b>2.1</b> Why visualize data?</a></li>
<li class="chapter" data-level="2.2" data-path="intro-to-ggplot.html"><a href="intro-to-ggplot.html#other-topics"><i class="fa fa-check"></i><b>2.2</b> Other topics</a></li>
</ul></li>
<li class="part"><span><b>II Text Analysis</b></span></li>
<li class="chapter" data-level="3" data-path="text-analysis-intro.html"><a href="text-analysis-intro.html"><i class="fa fa-check"></i><b>3</b> Introduction to Text Analysis</a></li>
<li class="chapter" data-level="4" data-path="text1.html"><a href="text1.html"><i class="fa fa-check"></i><b>4</b> Text1</a></li>
<li class="chapter" data-level="5" data-path="tidy-text-mining-from-stat-413.html"><a href="tidy-text-mining-from-stat-413.html"><i class="fa fa-check"></i><b>5</b> Tidy Text Mining from STAT 413</a><ul>
<li class="chapter" data-level="5.1" data-path="tidy-text-mining-from-stat-413.html"><a href="tidy-text-mining-from-stat-413.html#tidy-text-format"><i class="fa fa-check"></i><b>5.1</b> Tidy Text Format</a></li>
<li class="chapter" data-level="5.2" data-path="tidy-text-mining-from-stat-413.html"><a href="tidy-text-mining-from-stat-413.html#unnest_tokens-on-larger-text"><i class="fa fa-check"></i><b>5.2</b> <code>unnest_tokens()</code> on larger text</a></li>
<li class="chapter" data-level="5.3" data-path="tidy-text-mining-from-stat-413.html"><a href="tidy-text-mining-from-stat-413.html#compare-word-frequencies-between-authors"><i class="fa fa-check"></i><b>5.3</b> Compare word frequencies between authors</a></li>
<li class="chapter" data-level="5.4" data-path="tidy-text-mining-from-stat-413.html"><a href="tidy-text-mining-from-stat-413.html#compare-word-frequency-by-author-to-austen"><i class="fa fa-check"></i><b>5.4</b> Compare word frequency by author to Austen</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tidy-text-mining-from-stat-413-continued.html"><a href="tidy-text-mining-from-stat-413-continued.html"><i class="fa fa-check"></i><b>6</b> Tidy text mining from STAT 413 continued</a><ul>
<li class="chapter" data-level="6.1" data-path="tidy-text-mining-from-stat-413-continued.html"><a href="tidy-text-mining-from-stat-413-continued.html#sentiment-analysis"><i class="fa fa-check"></i><b>6.1</b> Sentiment Analysis</a></li>
<li class="chapter" data-level="6.2" data-path="tidy-text-mining-from-stat-413-continued.html"><a href="tidy-text-mining-from-stat-413-continued.html#plot-a-sentiment-by-chapter"><i class="fa fa-check"></i><b>6.2</b> Plot a sentiment by chapter</a></li>
<li class="chapter" data-level="6.3" data-path="tidy-text-mining-from-stat-413-continued.html"><a href="tidy-text-mining-from-stat-413-continued.html#modifying-what-contributes-to-sentiment-analysis"><i class="fa fa-check"></i><b>6.3</b> Modifying what contributes to sentiment analysis</a></li>
<li class="chapter" data-level="6.4" data-path="tidy-text-mining-from-stat-413-continued.html"><a href="tidy-text-mining-from-stat-413-continued.html#wordcloud-plots"><i class="fa fa-check"></i><b>6.4</b> WordCloud plots</a></li>
</ul></li>
<li class="part"><span><b>III Music Analysis</b></span></li>
<li class="chapter" data-level="7" data-path="music-analysis-intro.html"><a href="music-analysis-intro.html"><i class="fa fa-check"></i><b>7</b> Introduction to Music Analysis</a></li>
<li class="chapter" data-level="8" data-path="music-1st-chapter-header.html"><a href="music-1st-chapter-header.html"><i class="fa fa-check"></i><b>8</b> Music 1st chapter header</a></li>
<li class="part"><span><b>IV Ethics and Machine Learning</b></span></li>
<li class="chapter" data-level="9" data-path="ethics-intro.html"><a href="ethics-intro.html"><i class="fa fa-check"></i><b>9</b> Introduction to Ethics and Machine Learning</a></li>
<li class="chapter" data-level="10" data-path="machine-learning-intro.html"><a href="machine-learning-intro.html"><i class="fa fa-check"></i><b>10</b> Machine Learning Intro</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STAT 312 - Introduction to Data Science Applications</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidy-text-mining-from-stat-413-continued" class="section level1">
<h1><span class="header-section-number">6</span> Tidy text mining from STAT 413 continued</h1>
<p>Learning Objectives:</p>
<ul>
<li>Analyze sentiment as it changes through a text</li>
<li>Graph word clouds</li>
</ul>
<p>Resources:</p>
<p><a href="https://www.tidytextmining.com/">Text Mining with R by Julia Silge and David Robinson</a>.</p>
<div id="sentiment-analysis" class="section level2">
<h2><span class="header-section-number">6.1</span> Sentiment Analysis</h2>
<p>Sections 2.1 - 2.3 in the book and this <a href="https://youtu.be/uqiAuUcMuqU">video</a></p>
<p>Naive approach: sentiment of each word and add them up for a given amount of text. This approach does not take into account word qualifiers like not, never, always, etc. Generally, if we add up over many paragraphs, the positive and negative words will cancel each other out. So, we are usually better off adding either by sentence or by paragraph.</p>
<p>There are several sentiment lexicons we can use:</p>
<ul>
<li>AFINN from Finn ?rup Nielsen,</li>
<li>bing from Bing Liu and collaborators</li>
<li>nrc from Saif Mohammad and Peter Turney</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">sentiments</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co">#&gt; # A tibble: 6,786 x 2</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co">#&gt;   word       sentiment</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">#&gt; 1 2-faces    negative </span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">#&gt; 2 abnormal   negative </span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">#&gt; 3 abolish    negative </span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt; 4 abominable negative </span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="co">#&gt; 5 abominably negative </span></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="co">#&gt; 6 abominate  negative </span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="co">#&gt; # ... with 6,780 more rows</span></a>
<a class="sourceLine" id="cb8-12" title="12">sentiments <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(word)</a>
<a class="sourceLine" id="cb8-13" title="13"><span class="co">#&gt; # A tibble: 6,786 x 2</span></a>
<a class="sourceLine" id="cb8-14" title="14"><span class="co">#&gt;   word       sentiment</span></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb8-16" title="16"><span class="co">#&gt; 1 2-faces    negative </span></a>
<a class="sourceLine" id="cb8-17" title="17"><span class="co">#&gt; 2 abnormal   negative </span></a>
<a class="sourceLine" id="cb8-18" title="18"><span class="co">#&gt; 3 abolish    negative </span></a>
<a class="sourceLine" id="cb8-19" title="19"><span class="co">#&gt; 4 abominable negative </span></a>
<a class="sourceLine" id="cb8-20" title="20"><span class="co">#&gt; 5 abominably negative </span></a>
<a class="sourceLine" id="cb8-21" title="21"><span class="co">#&gt; 6 abominate  negative </span></a>
<a class="sourceLine" id="cb8-22" title="22"><span class="co">#&gt; # ... with 6,780 more rows</span></a>
<a class="sourceLine" id="cb8-23" title="23"><span class="kw">get_sentiments</span>(<span class="st">&quot;afinn&quot;</span>)</a>
<a class="sourceLine" id="cb8-24" title="24"><span class="co">#&gt; # A tibble: 2,477 x 2</span></a>
<a class="sourceLine" id="cb8-25" title="25"><span class="co">#&gt;   word       value</span></a>
<a class="sourceLine" id="cb8-26" title="26"><span class="co">#&gt;   &lt;chr&gt;      &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb8-27" title="27"><span class="co">#&gt; 1 abandon       -2</span></a>
<a class="sourceLine" id="cb8-28" title="28"><span class="co">#&gt; 2 abandoned     -2</span></a>
<a class="sourceLine" id="cb8-29" title="29"><span class="co">#&gt; 3 abandons      -2</span></a>
<a class="sourceLine" id="cb8-30" title="30"><span class="co">#&gt; 4 abducted      -2</span></a>
<a class="sourceLine" id="cb8-31" title="31"><span class="co">#&gt; 5 abduction     -2</span></a>
<a class="sourceLine" id="cb8-32" title="32"><span class="co">#&gt; 6 abductions    -2</span></a>
<a class="sourceLine" id="cb8-33" title="33"><span class="co">#&gt; # ... with 2,471 more rows</span></a>
<a class="sourceLine" id="cb8-34" title="34"><span class="kw">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>)</a>
<a class="sourceLine" id="cb8-35" title="35"><span class="co">#&gt; # A tibble: 6,786 x 2</span></a>
<a class="sourceLine" id="cb8-36" title="36"><span class="co">#&gt;   word       sentiment</span></a>
<a class="sourceLine" id="cb8-37" title="37"><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb8-38" title="38"><span class="co">#&gt; 1 2-faces    negative </span></a>
<a class="sourceLine" id="cb8-39" title="39"><span class="co">#&gt; 2 abnormal   negative </span></a>
<a class="sourceLine" id="cb8-40" title="40"><span class="co">#&gt; 3 abolish    negative </span></a>
<a class="sourceLine" id="cb8-41" title="41"><span class="co">#&gt; 4 abominable negative </span></a>
<a class="sourceLine" id="cb8-42" title="42"><span class="co">#&gt; 5 abominably negative </span></a>
<a class="sourceLine" id="cb8-43" title="43"><span class="co">#&gt; 6 abominate  negative </span></a>
<a class="sourceLine" id="cb8-44" title="44"><span class="co">#&gt; # ... with 6,780 more rows</span></a>
<a class="sourceLine" id="cb8-45" title="45"><span class="kw">get_sentiments</span>(<span class="st">&quot;nrc&quot;</span>)</a>
<a class="sourceLine" id="cb8-46" title="46"><span class="co">#&gt; # A tibble: 13,901 x 2</span></a>
<a class="sourceLine" id="cb8-47" title="47"><span class="co">#&gt;   word      sentiment</span></a>
<a class="sourceLine" id="cb8-48" title="48"><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb8-49" title="49"><span class="co">#&gt; 1 abacus    trust    </span></a>
<a class="sourceLine" id="cb8-50" title="50"><span class="co">#&gt; 2 abandon   fear     </span></a>
<a class="sourceLine" id="cb8-51" title="51"><span class="co">#&gt; 3 abandon   negative </span></a>
<a class="sourceLine" id="cb8-52" title="52"><span class="co">#&gt; 4 abandon   sadness  </span></a>
<a class="sourceLine" id="cb8-53" title="53"><span class="co">#&gt; 5 abandoned anger    </span></a>
<a class="sourceLine" id="cb8-54" title="54"><span class="co">#&gt; 6 abandoned fear     </span></a>
<a class="sourceLine" id="cb8-55" title="55"><span class="co">#&gt; # ... with 13,895 more rows</span></a></code></pre></div>
<p>Since the nrc lexicon gives us the emotion, we can look at words labelled as fear if we choose.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">tidy_books &lt;-<span class="st"> </span><span class="kw">austen_books</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(book) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">linenumber =</span> <span class="kw">row_number</span>(),</a>
<a class="sourceLine" id="cb9-4" title="4">         <span class="dt">chapter =</span> <span class="kw">cumsum</span>(<span class="kw">str_detect</span>(text, </a>
<a class="sourceLine" id="cb9-5" title="5">                    <span class="kw">regex</span>(<span class="st">&quot;^chapter [</span><span class="ch">\\</span><span class="st">divxlc]&quot;</span>,</a>
<a class="sourceLine" id="cb9-6" title="6">                   <span class="dt">ignore_case =</span> <span class="ot">TRUE</span>)))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="st">  </span><span class="co"># use word so the inner_join will match with the nrc lexicon</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="st">  </span><span class="kw">unnest_tokens</span>(word, text) </a>
<a class="sourceLine" id="cb9-10" title="10"></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="co"># select only the words from the nrc lexicon that are &quot;fear&quot; words</span></a>
<a class="sourceLine" id="cb9-12" title="12">nrcfear &lt;-<span class="st"> </span><span class="kw">get_sentiments</span>(<span class="st">&quot;nrc&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="st">  </span><span class="kw">filter</span>(sentiment <span class="op">==</span><span class="st"> &quot;fear&quot;</span>)</a>
<a class="sourceLine" id="cb9-14" title="14"></a>
<a class="sourceLine" id="cb9-15" title="15">tidy_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-16" title="16"><span class="st">  </span><span class="kw">filter</span>(book <span class="op">==</span><span class="st"> &quot;Emma&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-17" title="17"><span class="st">  </span><span class="kw">inner_join</span>(nrcfear) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-18" title="18"><span class="st">  </span><span class="kw">count</span>(word, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb9-19" title="19"><span class="co">#&gt; # A tibble: 364 x 2</span></a>
<a class="sourceLine" id="cb9-20" title="20"><span class="co">#&gt;   word       n</span></a>
<a class="sourceLine" id="cb9-21" title="21"><span class="co">#&gt; * &lt;chr&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb9-22" title="22"><span class="co">#&gt; 1 doubt     98</span></a>
<a class="sourceLine" id="cb9-23" title="23"><span class="co">#&gt; 2 ill       72</span></a>
<a class="sourceLine" id="cb9-24" title="24"><span class="co">#&gt; 3 afraid    65</span></a>
<a class="sourceLine" id="cb9-25" title="25"><span class="co">#&gt; 4 marry     63</span></a>
<a class="sourceLine" id="cb9-26" title="26"><span class="co">#&gt; 5 change    61</span></a>
<a class="sourceLine" id="cb9-27" title="27"><span class="co">#&gt; 6 bad       60</span></a>
<a class="sourceLine" id="cb9-28" title="28"><span class="co">#&gt; # ... with 358 more rows</span></a></code></pre></div>
<hr />
</div>
<div id="plot-a-sentiment-by-chapter" class="section level2">
<h2><span class="header-section-number">6.2</span> Plot a sentiment by chapter</h2>
<p>Watch this <a href="https://youtu.be/ngoO4YzJVnY">video</a></p>
<p>See if you can plot the fear by chapter.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">fear_chapter &lt;-<span class="st"> </span>tidy_books <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st"> </span><span class="kw">inner_join</span>(nrcfear) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="st"> </span><span class="kw">group_by</span>(book,chapter) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="st"> </span><span class="kw">count</span>()</a>
<a class="sourceLine" id="cb10-5" title="5">fear_chapter <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(chapter, n)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>book, <span class="dt">scales =</span> <span class="st">&quot;free_x&quot;</span>)</a></code></pre></div>
<p><img src="tidytext2_files/figure-html/fear_by_chapter-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>What other sentiments are there in nrc that we could look at?</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">get_sentiments</span>(<span class="st">&quot;nrc&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(sentiment) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="st">  </span><span class="kw">count</span>()</a>
<a class="sourceLine" id="cb11-4" title="4"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="co">#&gt; # Groups:   sentiment [10]</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co">#&gt;   sentiment        n</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co">#&gt;   &lt;chr&gt;        &lt;int&gt;</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="co">#&gt; 1 anger         1247</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">#&gt; 2 anticipation   839</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="co">#&gt; 3 disgust       1058</span></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="co">#&gt; 4 fear          1476</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="co">#&gt; 5 joy            689</span></a>
<a class="sourceLine" id="cb11-13" title="13"><span class="co">#&gt; 6 negative      3324</span></a>
<a class="sourceLine" id="cb11-14" title="14"><span class="co">#&gt; # ... with 4 more rows</span></a></code></pre></div>
<p>Now, let’s use 80 line blocks and use bing to categorize each word as positive or negative. We will spread them to get the counts in separate columns and then add a column with the net = positive - negative</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">janeaustensentiment &lt;-<span class="st"> </span>tidy_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="st">  </span><span class="kw">inner_join</span>(<span class="kw">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="st">  </span><span class="kw">count</span>(book, <span class="dt">index =</span> linenumber <span class="op">%/%</span><span class="st"> </span><span class="dv">80</span>, sentiment) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="st">  </span><span class="kw">spread</span>(sentiment, n, <span class="dt">fill =</span> <span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sentiment =</span> positive <span class="op">-</span><span class="st"> </span>negative)</a>
<a class="sourceLine" id="cb12-6" title="6"></a>
<a class="sourceLine" id="cb12-7" title="7">janeaustensentiment <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(index, sentiment, <span class="dt">fill =</span> book)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>book, <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">scales =</span> <span class="st">&quot;free_x&quot;</span>)</a></code></pre></div>
<p><img src="tidytext2_files/figure-html/net_sentiment_per_80_lines-1.png" width="70%" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="modifying-what-contributes-to-sentiment-analysis" class="section level2">
<h2><span class="header-section-number">6.3</span> Modifying what contributes to sentiment analysis</h2>
<p>Section 2.4 in online book and this<a href="https://youtu.be/07NXa5L9K_4">video</a></p>
<p>We should probably look at which words contribute to the positive and negative sentiment and be sure we want to include them.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">bing_word_counts &lt;-<span class="st"> </span>tidy_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="kw">inner_join</span>(<span class="kw">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="st">  </span><span class="kw">count</span>(word, sentiment, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb13-5" title="5"></a>
<a class="sourceLine" id="cb13-6" title="6">bing_word_counts</a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">#&gt; # A tibble: 2,585 x 3</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">#&gt;   word   sentiment     n</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">#&gt; * &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt;</span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co">#&gt; 1 miss   negative   1855</span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="co">#&gt; 2 well   positive   1523</span></a>
<a class="sourceLine" id="cb13-12" title="12"><span class="co">#&gt; 3 good   positive   1380</span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="co">#&gt; 4 great  positive    981</span></a>
<a class="sourceLine" id="cb13-14" title="14"><span class="co">#&gt; 5 like   positive    725</span></a>
<a class="sourceLine" id="cb13-15" title="15"><span class="co">#&gt; 6 better positive    639</span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="co">#&gt; # ... with 2,579 more rows</span></a>
<a class="sourceLine" id="cb13-17" title="17"><span class="co"># visualize it</span></a>
<a class="sourceLine" id="cb13-18" title="18">bing_word_counts <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-19" title="19"><span class="st">  </span><span class="kw">group_by</span>(sentiment) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-20" title="20"><span class="st">  </span><span class="kw">top_n</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-21" title="21"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-22" title="22"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">reorder</span>(word, n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-23" title="23"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(word, n, <span class="dt">fill =</span> sentiment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-24" title="24"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-25" title="25"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>sentiment, <span class="dt">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-26" title="26"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Contribution to sentiment&quot;</span>,</a>
<a class="sourceLine" id="cb13-27" title="27">       <span class="dt">x =</span> <span class="ot">NULL</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-28" title="28"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="tidytext2_files/figure-html/bing_word_counts-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Not what we want for Jane Austen novels!! Miss is probably not a negative word, but rather refers to a young girl. Two approaches to fix this:</p>
<ul>
<li>take the word miss out of the data before doing the analysis or</li>
<li>change the sentiment lexicon to no longer have “miss” as a negative</li>
</ul>
<p>First we will remove the word <em>miss</em> by adding it to the stop words.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">custom_stop_words &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(<span class="kw">data_frame</span>(</a>
<a class="sourceLine" id="cb14-2" title="2">      <span class="dt">word =</span> <span class="kw">c</span>(<span class="st">&quot;miss&quot;</span>),</a>
<a class="sourceLine" id="cb14-3" title="3">      <span class="dt">lexicon =</span> <span class="kw">c</span>(<span class="st">&quot;custom&quot;</span>)), </a>
<a class="sourceLine" id="cb14-4" title="4">       stop_words)</a>
<a class="sourceLine" id="cb14-5" title="5"></a>
<a class="sourceLine" id="cb14-6" title="6">custom_stop_words</a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">#&gt; # A tibble: 1,150 x 2</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="co">#&gt;   word  lexicon</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="co">#&gt; * &lt;chr&gt; &lt;chr&gt;  </span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="co">#&gt; 1 miss  custom </span></a>
<a class="sourceLine" id="cb14-11" title="11"><span class="co">#&gt; 2 a     SMART  </span></a>
<a class="sourceLine" id="cb14-12" title="12"><span class="co">#&gt; 3 a&#39;s   SMART  </span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="co">#&gt; 4 able  SMART  </span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="co">#&gt; 5 about SMART  </span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="co">#&gt; 6 above SMART  </span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="co">#&gt; # ... with 1,144 more rows</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="co"># Now, let&#39;s redo with the new stop words.</span></a>
<a class="sourceLine" id="cb14-18" title="18">tidy_books_no_miss &lt;-<span class="st"> </span><span class="kw">austen_books</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-19" title="19"><span class="st">  </span><span class="kw">group_by</span>(book) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-20" title="20"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">linenumber =</span> <span class="kw">row_number</span>(),</a>
<a class="sourceLine" id="cb14-21" title="21">         <span class="dt">chapter =</span> <span class="kw">cumsum</span>(<span class="kw">str_detect</span>(text, </a>
<a class="sourceLine" id="cb14-22" title="22">                    <span class="kw">regex</span>(<span class="st">&quot;^chapter [</span><span class="ch">\\</span><span class="st">divxlc]&quot;</span>,</a>
<a class="sourceLine" id="cb14-23" title="23">                   <span class="dt">ignore_case =</span> <span class="ot">TRUE</span>)))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-24" title="24"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-25" title="25"><span class="st">  </span><span class="co"># use word so the inner_join will match with the nrc lexicon</span></a>
<a class="sourceLine" id="cb14-26" title="26"><span class="st">  </span><span class="kw">unnest_tokens</span>(word, text) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-27" title="27"><span class="st">  </span><span class="kw">anti_join</span>(custom_stop_words) </a>
<a class="sourceLine" id="cb14-28" title="28"></a>
<a class="sourceLine" id="cb14-29" title="29">bing_word_counts &lt;-<span class="st"> </span>tidy_books_no_miss <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-30" title="30"><span class="st">  </span><span class="kw">inner_join</span>(<span class="kw">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-31" title="31"><span class="st">  </span><span class="kw">count</span>(word, sentiment, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-32" title="32"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb14-33" title="33"></a>
<a class="sourceLine" id="cb14-34" title="34">bing_word_counts</a>
<a class="sourceLine" id="cb14-35" title="35"><span class="co">#&gt; # A tibble: 2,554 x 3</span></a>
<a class="sourceLine" id="cb14-36" title="36"><span class="co">#&gt;   word      sentiment     n</span></a>
<a class="sourceLine" id="cb14-37" title="37"><span class="co">#&gt; * &lt;chr&gt;     &lt;chr&gt;     &lt;int&gt;</span></a>
<a class="sourceLine" id="cb14-38" title="38"><span class="co">#&gt; 1 happy     positive    534</span></a>
<a class="sourceLine" id="cb14-39" title="39"><span class="co">#&gt; 2 love      positive    495</span></a>
<a class="sourceLine" id="cb14-40" title="40"><span class="co">#&gt; 3 pleasure  positive    462</span></a>
<a class="sourceLine" id="cb14-41" title="41"><span class="co">#&gt; 4 poor      negative    424</span></a>
<a class="sourceLine" id="cb14-42" title="42"><span class="co">#&gt; 5 happiness positive    369</span></a>
<a class="sourceLine" id="cb14-43" title="43"><span class="co">#&gt; 6 comfort   positive    292</span></a>
<a class="sourceLine" id="cb14-44" title="44"><span class="co">#&gt; # ... with 2,548 more rows</span></a>
<a class="sourceLine" id="cb14-45" title="45"></a>
<a class="sourceLine" id="cb14-46" title="46">bing_word_counts <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-47" title="47"><span class="st">  </span><span class="kw">group_by</span>(sentiment) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-48" title="48"><span class="st">  </span><span class="kw">top_n</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-49" title="49"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-50" title="50"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">reorder</span>(word, n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-51" title="51"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(word, n, <span class="dt">fill =</span> sentiment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-52" title="52"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-53" title="53"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>sentiment, <span class="dt">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-54" title="54"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Contribution to sentiment&quot;</span>,</a>
<a class="sourceLine" id="cb14-55" title="55">       <span class="dt">x =</span> <span class="ot">NULL</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-56" title="56"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="tidytext2_files/figure-html/fix_miss-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>A different approach would be to leave it in the analysis, but remove the word “miss” from the bing sentiment lexicon.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">bing_no_miss &lt;-<span class="st"> </span><span class="kw">get_sentiments</span>(<span class="st">&quot;bing&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="st">  </span><span class="kw">filter</span>(word <span class="op">!=</span><span class="st"> &quot;miss&quot;</span>)</a>
<a class="sourceLine" id="cb15-3" title="3">bing_word_counts &lt;-<span class="st"> </span>tidy_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="st">  </span><span class="kw">inner_join</span>(bing_no_miss) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="st">  </span><span class="kw">count</span>(word, sentiment, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-6" title="6"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb15-7" title="7"></a>
<a class="sourceLine" id="cb15-8" title="8">bing_word_counts</a>
<a class="sourceLine" id="cb15-9" title="9"><span class="co">#&gt; # A tibble: 2,584 x 3</span></a>
<a class="sourceLine" id="cb15-10" title="10"><span class="co">#&gt;   word   sentiment     n</span></a>
<a class="sourceLine" id="cb15-11" title="11"><span class="co">#&gt; * &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt;</span></a>
<a class="sourceLine" id="cb15-12" title="12"><span class="co">#&gt; 1 well   positive   1523</span></a>
<a class="sourceLine" id="cb15-13" title="13"><span class="co">#&gt; 2 good   positive   1380</span></a>
<a class="sourceLine" id="cb15-14" title="14"><span class="co">#&gt; 3 great  positive    981</span></a>
<a class="sourceLine" id="cb15-15" title="15"><span class="co">#&gt; 4 like   positive    725</span></a>
<a class="sourceLine" id="cb15-16" title="16"><span class="co">#&gt; 5 better positive    639</span></a>
<a class="sourceLine" id="cb15-17" title="17"><span class="co">#&gt; 6 enough positive    613</span></a>
<a class="sourceLine" id="cb15-18" title="18"><span class="co">#&gt; # ... with 2,578 more rows</span></a>
<a class="sourceLine" id="cb15-19" title="19"><span class="co"># visualize it</span></a>
<a class="sourceLine" id="cb15-20" title="20">bing_word_counts <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-21" title="21"><span class="st">  </span><span class="kw">group_by</span>(sentiment) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-22" title="22"><span class="st">  </span><span class="kw">top_n</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-23" title="23"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-24" title="24"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">reorder</span>(word, n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-25" title="25"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(word, n, <span class="dt">fill =</span> sentiment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-26" title="26"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-27" title="27"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>sentiment, <span class="dt">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-28" title="28"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Contribution to sentiment&quot;</span>,</a>
<a class="sourceLine" id="cb15-29" title="29">       <span class="dt">x =</span> <span class="ot">NULL</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-30" title="30"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="tidytext2_files/figure-html/change_bing-1.png" width="70%" style="display: block; margin: auto;" /></p>
<ul>
<li><strong>Exercise 3:</strong> Let’s look at how the sentiment changes across the length of a book by looking at 80 lines at a time. Compare how sentiment changes in Victor Hugo’s Les Miserables and Charles Dickens’ A Tale of Two Cities. Look at negative vs positive sentiment. Then pick a sentiment like joy or anger or fear or … and see how that sentiment compares.</li>
</ul>
<hr />
</div>
<div id="wordcloud-plots" class="section level2">
<h2><span class="header-section-number">6.4</span> WordCloud plots</h2>
<p>Sections 2.5 - 2.7 in book and this <a href="https://youtu.be/dUGa7YVm8yU">video</a></p>
<p>We can do wordcloud plots where the frequency of the word in the text determines the size of the word in the wordcloud. We can also color the words based on the sentiment.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">library</span>(wordcloud)</a>
<a class="sourceLine" id="cb16-2" title="2">tidy_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="st">  </span><span class="kw">anti_join</span>(stop_words) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="st">  </span><span class="kw">count</span>(word) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="st">  </span><span class="kw">with</span>(<span class="kw">wordcloud</span>(word, n, <span class="dt">max.words =</span> <span class="dv">100</span>))</a>
<a class="sourceLine" id="cb16-6" title="6"></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="kw">library</span>(reshape2)</a>
<a class="sourceLine" id="cb16-8" title="8"></a>
<a class="sourceLine" id="cb16-9" title="9">tidy_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="st">  </span><span class="kw">inner_join</span>(bing_no_miss) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-11" title="11"><span class="st">  </span><span class="kw">count</span>(word, sentiment, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-12" title="12"><span class="st">  </span><span class="kw">acast</span>(word <span class="op">~</span><span class="st"> </span>sentiment, <span class="dt">value.var =</span> <span class="st">&quot;n&quot;</span>, <span class="dt">fill =</span> <span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-13" title="13"><span class="st">  </span><span class="kw">comparison.cloud</span>(<span class="dt">colors =</span> <span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>),</a>
<a class="sourceLine" id="cb16-14" title="14">                   <span class="dt">max.words =</span> <span class="dv">100</span>)</a></code></pre></div>
<p><img src="tidytext2_files/figure-html/wordclouds-1.png" width="70%" style="display: block; margin: auto;" /><img src="tidytext2_files/figure-html/wordclouds-2.png" width="70%" style="display: block; margin: auto;" /></p>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="tidy-text-mining-from-stat-413.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="music-analysis-intro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
